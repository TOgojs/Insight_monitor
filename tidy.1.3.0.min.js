!function(){var e={requestImgSrc:"http://10.0.0.206:9980/img/tz.gif",expires:31536e7};var t={siteId:0,pvId:0,uvId:0,dateTime:0,cookieEnabled:navigator.cookieEnabled,language:navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",screenSize:(window.screen.width||0)+"x"+(window.screen.height||0),dpi:window.devicePixelRatio,colorDepth:window.screen.colorDepth,platform:/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&"mobile"||/(Android)/i.test(navigator.userAgent)&&"Android"||"PC",requestType:0};var n={siteId:0,pvId:0,uvId:0,loadPage:0,domReady:0,redirect:0,lookupDomain:0,ttfb:0,request:0,loadEvent:0,cache:0,unLoadEvent:0,connect:0,requestType:1};var o={msg:"",url:"",line:"",col:"",error:""};var r={siteId:0,pvId:0,uvId:0,pageTitle:escape(document.title),nodeName:"",propType:"",propName:"",propId:"",propClass:"",propVal:"",propText:"",dateTime:0,referer:document.referrer,requestType:2,xpath:"",filterXpath:""};function i(){}i.prototype.init=function(){var e=this;this.createUvPvId();this.monitorElement();this.handlerXpath();this.addEvent(window,"load",function(){setTimeout(function(){e.getPerformanceTiming();e.sendData(n)},5e3);t.pvId=_setting_.pvId;e.sendData(t)})};i.prototype.monitorElement=function(){var e=this;function t(t){var n=e.getTarget(t);if(new RegExp("(^||)"+n.nodeName+"(||$)","i").exec(_setting_.monitorEle.join("|"))){e.getEleInfo(n);e.sendData(r)}}this.addEvent(document,"click",t)};i.prototype.getXPath=function(e){for(var t=[];e&&e.nodeType==1;e=e.parentNode){if(!!e["id"]){var n=document.getElementsByTagName("*"),o=0;for(var r=0;r<n.length;r++){if(!!n[r]["id"]&&n[r]["id"]==e.id){o++}if(o>1){break}}if(o==1){t.unshift('//*[@id="'+e["id"]+'"]');return t.join("/")}else{return false}}else{for(var i=0,a=e.previousElementSibling;a;a=a.previousElementSibling){if(a.nodeName==e.nodeName){i++}}if(i==0){if(e.nextElementSibling){for(var s=0,p=e.nextElementSibling;p;p=p.nextElementSibling){if(p.nodeName==e.nodeName){s++;break}}if(s==0){t.unshift(e.nodeName.toLowerCase())}else{t.unshift(e.nodeName.toLowerCase()+"["+(i+1)+"]")}}else{t.unshift(e.nodeName.toLowerCase())}}else{t.unshift(e.nodeName.toLowerCase()+"["+(i+1)+"]")}}}return t.length?"/"+t.join("/"):null};i.prototype.handlerXpath=function(){var e=_setting_.monitorXpath.length;for(var t=0;t<e;t++){_setting_.regXpath[t]=_setting_.monitorXpath[t].toString().replace(/\*(?=(\/))/,"?.*").replace(/(?=(\/))|(?=(\*\[))|(?=(\@))|(?=(\'))|(?=(\"))|(?=(\[))|(?=(\]))/gi,"\\")}};i.prototype.getEleInfo=function(e){var t=e.type,n=e.nodeName.toLowerCase(),o=_setting_.monitorXpath.length;r.nodeName=n;r.propType=t;r.propName=e.name;r.propId=e.id;r.propClass=e.className;r.propText=this.getContent(e);r.xpath="";r.filterXpath="";r.debug=_setting_.debug;for(var i=0;i<o;i++){if(new RegExp(_setting_.regXpath[i],"gi").test(this.getXPath(e))){r.xpath=this.getXPath(e);r.filterXpath=_setting_.monitorXpath[i];break}}switch(n){case"button":r.propText=this.getContent(e);break;case"input":if(t!="text"&&t!="password"){r.propText=this.trim(e.value);if(e.type=="checkbox"||e.type=="radio"){r.propText=this.getContent(this.getSiblingsEle(e,"label")[0])}};break;case"textarea":r.propText="";break;case"select":r.propText=this.getContent(e.options[e.selectedIndex]);r.propVal=this.trim(e.value);break}this.filterData()};i.prototype.filterData=function(){for(var e in r){if(r[e]===""){delete r[e]}}};i.prototype.getSiblingsEle=function(e,t){var n=e.parentNode.childNodes,o=n.length,r=[];for(var i=0;i<o;i++){if(n[i].nodeName.toLowerCase()==t){r.push(n[i])}}return r};i.prototype.getContent=function(e){return escape(e.textContent?this.trim(e.textContent):this.trim(e.innerText))};i.prototype.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};i.prototype.sendData=function(e){var t=this;var n=this.extend(e,{siteId:_setting_.siteId,pvId:_setting_.pvId,uvId:_setting_.uvId,dateTime:t.getTimesTamp()});this.newRequest(JSON.stringify(n))};i.prototype.newRequest=function(t){var n=new Image,o="monitor_cnb_"+this.getTimesTamp();window[o]=n;n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null;n=window[o]=null};n.src=e.requestImgSrc+"?cache="+this.getTimesTamp()+"&data="+t;console.warn("发送数据"+e.requestImgSrc+"?cache="+this.getTimesTamp()+"&data="+t)};i.prototype.createUUID=function(){generate=function(){var e=_getRandomInt,t=_hexAligner;return t(e(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12)};_getRandomInt=function(e){if(e<0)return NaN;if(e<=30)return 0|Math.random()*(1<<e);if(e<=53)return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30);return NaN};_getIntAligner=function(e){return function(t,n){var o=t.toString(e),r=n-o.length,i="0";for(;r>0;r>>>=1,i+=i){if(r&1){o=i+o}}return o}};_hexAligner=_getIntAligner(16);return generate()};i.prototype.createUvPvId=function(){var t=this.getCookie("uvId");if(t){_setting_.uvId=t}else{_setting_.uvId=this.createUUID();this.setCookie("uvId",_setting_.uvId,e.expires)}_setting_.pvId=this.createUUID()};i.prototype.setCookie=function(e,t,n){var o=new Date;o.setTime(o.getTime()+n);document.cookie=e+"="+t+";path=/;expires="+o.toGMTString()};i.prototype.getCookie=function(e){var t=document.cookie,n=[];return(n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(t))?n[2]:null};i.prototype.getTimesTamp=function(){return(new Date).getTime()};i.prototype.addEvent=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else{e.attachEvent("on"+t,function(){n.call(e);return n})}};i.prototype.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else{e.detachEvent("on"+t,n)}};i.prototype.getEvent=function(e){return e||window.event};i.prototype.getTarget=function(e){var t=this.getEvent(e);return t.target||t.srcElement};i.prototype.extend=function(e){if(e===null||e===undefined){console.log("Cannot conver undefined or null to object!")}var t=Object(e),n=arguments.length;for(var o=1;o<n;o++){var r=arguments[o];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){t[i]=r[i]}}}return t};i.prototype.getPerformanceTiming=function(){var e=window.performance;if(!e){console.info("你的浏览器不支持 performance 接口");return}var t=e.timing;n.loadPage=t.loadEventEnd-t.navigationStart;n.domReady=t.domComplete-t.responseEnd;n.redirect=t.redirectEnd-t.redirectStart;n.lookupDomain=t.domainLookupEnd-t.domainLookupStart;n.ttfb=t.responseStart-t.navigationStart;n.request=t.responseEnd-t.responseStart;n.loadEvent=t.loadEventEnd-t.loadEventStart;n.cache=t.domainLookupStart-t.fetchStart;n.unLoadEvent=t.unloadEventEnd-t.unloadEventStart;n.connect=t.connectEnd-t.connectStart};var a=new i;a.init();window.onerror=function(e,t,n,r,i){if(e!="Script error."&&!t){}setTimeout(function(){r=r||window.event&&window.event.errorCharacter||0;o.url=t;o.line=n;o.col=r;if(i&&i.stack){o.msg=i.stack.toString()}else if(arguments.callee){var e=[];var s=arguments.callee.caller,p=3;while(s&&--p>0){e.push(s.toString());if(s===s.caller){break}s=s.caller}e=e.join(",");o.msg=i.stack.toString()}a.sendData(o)},0);return true}}();